# Evaluation Checklist (EVAL_CHECKLIST.md)

This file contains the exact evaluation checklist required by the Kasparro High Bar V2 acceptance test.

1. Error Handling & Resilience

- Global safe-call wrapper for agent calls: `src/utils/safety.py::safe_call`
- Categorized exceptions: `PipelineError`, `DataError`, `PlannerError`, `InsightError`, `CreativeError`, `EvaluatorError`, `UnexpectedError` in `src/utils/safety.py`
- Exponential backoff retry logic present in `safe_call` (base_delay * 2**attempt)
- Fallback logic: `FALLBACK_SUMMARY`, `FALLBACK_INSIGHTS`, `FALLBACK_CREATIVES`, `FALLBACK_VALIDATED` in `src/utils/safety.py`
- Orchestrator uses safe wrappers: `src/orchestrator/run.py` (safe_plan, safe_load_and_summarize, safe_generate_insights, safe_validate_insights, safe_generate_creatives)

2. Division-by-Zero Fix

- `src/utils/helpers.py::percent_change` handles previous == 0 and (0,0) case
- Tests covering this: `tests/test_percent_change.py`

3. Dynamic PlannerAgent

- `src/agents/planner.py` includes `compute_complexity()` and `plan()` with adaptive step insertion and reasoning logs

4. Adaptivity (InsightAgent)

- `src/agents/insight_agent.py` includes outlier removal (`_detect_outliers`), adaptive thresholds (`_compute_adaptive_threshold`), and confidence scoring (`_calculate_confidence`)

5. Schema Governance & Drift

- Schema validator: `src/utils/schema_validator.py`
- Drift detector: `src/utils/drift_detector.py`
- Baseline path (produced on run): `reports/baseline_stats.json`
- Validation executed in `src/orchestrator/run.py::validate_and_persist_outputs`

6. Observability

- Structured logging: `src/utils/logger_config.py` (StructuredFormatter, FileFormatter, AgentExecutionTracer)
- Files produced: `logs/run_<timestamp>.log`

7. Project Structure

- V1 structure preserved. New utilities added under `src/utils/` (safety.py, schema_validator.py, drift_detector.py, logger_config.py)
- Tests located in `tests/`

8. JSON Outputs

- `reports/insights.json` and `reports/creatives.json` should contain `"schema_version": "2.0"` and `confidence` fields.

9. Documentation

- README and V2 docs present: `README.md`, `V2_UPGRADE_SUMMARY.md`, `V2_DEPLOYMENT_MANIFEST.md`, `V2_CHANGES_SUMMARY.md`
- This file (`EVAL_CHECKLIST.md`) now present to satisfy the evaluator requirement.

---

Generated by automated evaluation helper. If you need this checklist updated or extended, edit this file and commit.
